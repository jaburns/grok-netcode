!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=39)}([function(t,e,n){var r=n(23),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},function(t,e,n){function r(t,e){var n=i(t,e);return o(n)?n:void 0}var o=n(54),i=n(60);t.exports=r},function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var o=n(44),i=n(45),a=n(46),c=n(47),u=n(48);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=c,r.prototype.set=u,t.exports=r},function(t,e,n){function r(t,e){for(var n=t.length;n--;)if(o(t[n][0],e))return n;return-1}var o=n(21);t.exports=r},function(t,e,n){function r(t){return null==t?void 0===t?u:c:s&&s in Object(t)?i(t):a(t)}var o=n(11),i=n(56),a=n(57),c="[object Null]",u="[object Undefined]",s=o?o.toStringTag:void 0;t.exports=r},function(t,e,n){var r=n(1),o=r(Object,"create");t.exports=o},function(t,e,n){function r(t,e){var n=t.__data__;return o(e)?n["string"==typeof e?"string":"hash"]:n.map}var o=n(70);t.exports=r},function(t,e,n){function r(t,e,n,r){var a=!n;n||(n={});for(var c=-1,u=e.length;++c<u;){var s=e[c],f=r?r(n[s],t[s],s,n,t):void 0;void 0===f&&(f=t[s]),a?i(n,s,f):o(n,s,f)}return n}var o=n(25),i=n(26);t.exports=r},function(t,e,n){var r=n(1),o=n(0),i=r(o,"Map");t.exports=i},function(t,e,n){var r=n(0),o=r.Symbol;t.exports=o},function(t,e,n){function r(t){return a(t)?o(t):i(t)}var o=n(27),i=n(84),a=n(31);t.exports=r},function(t,e){var n=Array.isArray;t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){function n(t){return function(e){return t(e)}}t.exports=n},function(t,e,n){(function(t){var r=n(23),o="object"==typeof e&&e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o,c=a&&r.process,u=function(){try{return c&&c.binding&&c.binding("util")}catch(t){}}();t.exports=u}).call(e,n(14)(t))},function(t,e){function n(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}var r=Object.prototype;t.exports=n},function(t,e,n){var r=n(92),o=n(33),i=Object.prototype,a=i.propertyIsEnumerable,c=Object.getOwnPropertySymbols,u=c?function(t){return null==t?[]:(t=Object(t),r(c(t),function(e){return a.call(t,e)}))}:o;t.exports=u},function(t,e,n){var r=n(96),o=n(10),i=n(97),a=n(98),c=n(99),u=n(6),s=n(24),f=s(r),p=s(o),l=s(i),v=s(a),h=s(c),y=u;(r&&"[object DataView]"!=y(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=y(new o)||i&&"[object Promise]"!=y(i.resolve())||a&&"[object Set]"!=y(new a)||c&&"[object WeakMap]"!=y(new c))&&(y=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?s(n):"";if(r)switch(r){case f:return"[object DataView]";case p:return"[object Map]";case l:return"[object Promise]";case v:return"[object Set]";case h:return"[object WeakMap]"}return e}),t.exports=y},function(t,e,n){function r(t){var e=new t.constructor(t.byteLength);return new o(e).set(new o(t)),e}var o=n(102);t.exports=r},function(t,e){function n(t,e){return t===e||t!==t&&e!==e}t.exports=n},function(t,e,n){function r(t){if(!i(t))return!1;var e=o(t);return e==c||e==u||e==a||e==s}var o=n(6),i=n(2),a="[object AsyncFunction]",c="[object Function]",u="[object GeneratorFunction]",s="[object Proxy]";t.exports=r},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(e,n(55))},function(t,e){function n(t){if(null!=t){try{return o.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var r=Function.prototype,o=r.toString;t.exports=n},function(t,e,n){function r(t,e,n){var r=t[e];c.call(t,e)&&i(r,n)&&(void 0!==n||e in t)||o(t,e,n)}var o=n(26),i=n(21),a=Object.prototype,c=a.hasOwnProperty;t.exports=r},function(t,e,n){function r(t,e,n){"__proto__"==e&&o?o(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var o=n(75);t.exports=r},function(t,e,n){function r(t,e){var n=a(t),r=!n&&i(t),f=!n&&!r&&c(t),l=!n&&!r&&!f&&s(t),v=n||r||f||l,h=v?o(t.length,String):[],y=h.length;for(var b in t)!e&&!p.call(t,b)||v&&("length"==b||f&&("offset"==b||"parent"==b)||l&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||u(b,y))||h.push(b);return h}var o=n(77),i=n(78),a=n(13),c=n(28),u=n(81),s=n(82),f=Object.prototype,p=f.hasOwnProperty;t.exports=r},function(t,e,n){(function(t){var r=n(0),o=n(80),i="object"==typeof e&&e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,c=a&&a.exports===i,u=c?r.Buffer:void 0,s=u?u.isBuffer:void 0,f=s||o;t.exports=f}).call(e,n(14)(t))},function(t,e){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}var r=9007199254740991;t.exports=n},function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},function(t,e,n){function r(t){return null!=t&&i(t.length)&&!o(t)}var o=n(22),i=n(29);t.exports=r},function(t,e,n){function r(t){return a(t)?o(t,!0):i(t)}var o=n(27),i=n(87),a=n(31);t.exports=r},function(t,e){function n(){return[]}t.exports=n},function(t,e,n){var r=n(35),o=n(36),i=n(18),a=n(33),c=Object.getOwnPropertySymbols,u=c?function(t){for(var e=[];t;)r(e,i(t)),t=o(t);return e}:a;t.exports=u},function(t,e){function n(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}t.exports=n},function(t,e,n){var r=n(30),o=r(Object.getPrototypeOf,Object);t.exports=o},function(t,e,n){function r(t,e,n){var r=e(t);return i(t)?r:o(r,n(t))}var o=n(35),i=n(13);t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateUID=function(){return Math.random().toString(36).substr(2)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(115),o=n(116),i=n(113),a=function(t){Math.random()<0||setTimeout(t,200+0*Math.random())},c=new r.Server(i.createCanvas());setInterval(c.update.bind(c),50),document.getElementById("addClientButton").onclick=function(t){var e=new o.Client(i.createCanvas());c.addClient(e.playerUID,function(t){return a(function(){return e.receiveState(t)})}),e.bindServer(function(t,e){return a(function(){return c.receiveInput(t,e)})}),setInterval(e.update.bind(e),50)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(41);e.newGameState=function(){return{players:{}}},e.newPlayerState=function(){return{lastInputUID:"",position:{x:.25+.5*Math.random(),y:.25+.5*Math.random()},velocity:{x:0,y:0},rotation:0}};var o=function(t,e){var n=r(e);if(t.left&&(n.rotation-=10),t.right&&(n.rotation+=10),t.up){var o=Math.cos(n.rotation*Math.PI/180),i=Math.sin(n.rotation*Math.PI/180);n.position.x+=.02*o,n.position.y+=.02*i}return n.lastInputUID=t.uid,n};e.stepGameState=function(t,e){var n=r(e);for(var i in n.players)n.players[i]=o(t[i],n.players[i]);return n},e.predictGameState=function(t,e,n){var i=r(n);return i.players[e]=o(t,i.players[e]),i}},function(t,e,n){function r(t){return o(t,i|a)}var o=n(42),i=1,a=4;t.exports=r},function(t,e,n){function r(t,e,n,C,z,F){var T,E=e&O,B=e&A,G=e&I;if(n&&(T=z?n(t,C,z,F):n(t)),void 0!==T)return T;if(!S(t))return t;var W=x(t);if(W){if(T=b(t),!E)return f(t,T)}else{var $=y(t),N=$==M||$==k;if(_(t))return s(t,E);if($==D||$==P||N&&!z){if(T=B||N?{}:j(t),!E)return B?l(t,u(T,t)):p(t,c(T,t))}else{if(!U[$])return z?t:{};T=d(t,$,E)}}F||(F=new o);var L=F.get(t);if(L)return L;if(F.set(t,T),m(t))return t.forEach(function(o){T.add(r(o,e,n,o,t,F))}),T;if(g(t))return t.forEach(function(o,i){T.set(i,r(o,e,n,i,t,F))}),T;var R=G?B?h:v:B?keysIn:w,V=W?void 0:R(t);return i(V||t,function(o,i){V&&(i=o,o=t[i]),a(T,i,r(o,e,n,i,t,F))}),T}var o=n(43),i=n(74),a=n(25),c=n(76),u=n(86),s=n(89),f=n(90),p=n(91),l=n(93),v=n(94),h=n(95),y=n(19),b=n(100),d=n(101),j=n(107),x=n(13),_=n(28),g=n(109),S=n(2),m=n(111),w=n(12),O=1,A=2,I=4,P="[object Arguments]",M="[object Function]",k="[object GeneratorFunction]",D="[object Object]",U={};U[P]=U["[object Array]"]=U["[object ArrayBuffer]"]=U["[object DataView]"]=U["[object Boolean]"]=U["[object Date]"]=U["[object Float32Array]"]=U["[object Float64Array]"]=U["[object Int8Array]"]=U["[object Int16Array]"]=U["[object Int32Array]"]=U["[object Map]"]=U["[object Number]"]=U[D]=U["[object RegExp]"]=U["[object Set]"]=U["[object String]"]=U["[object Symbol]"]=U["[object Uint8Array]"]=U["[object Uint8ClampedArray]"]=U["[object Uint16Array]"]=U["[object Uint32Array]"]=!0,U["[object Error]"]=U[M]=U["[object WeakMap]"]=!1,t.exports=r},function(t,e,n){function r(t){var e=this.__data__=new o(t);this.size=e.size}var o=n(4),i=n(49),a=n(50),c=n(51),u=n(52),s=n(53);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=c,r.prototype.has=u,r.prototype.set=s,t.exports=r},function(t,e){function n(){this.__data__=[],this.size=0}t.exports=n},function(t,e,n){function r(t){var e=this.__data__,n=o(e,t);return!(n<0)&&(n==e.length-1?e.pop():a.call(e,n,1),--this.size,!0)}var o=n(5),i=Array.prototype,a=i.splice;t.exports=r},function(t,e,n){function r(t){var e=this.__data__,n=o(e,t);return n<0?void 0:e[n][1]}var o=n(5);t.exports=r},function(t,e,n){function r(t){return o(this.__data__,t)>-1}var o=n(5);t.exports=r},function(t,e,n){function r(t,e){var n=this.__data__,r=o(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var o=n(5);t.exports=r},function(t,e,n){function r(){this.__data__=new o,this.size=0}var o=n(4);t.exports=r},function(t,e){function n(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}t.exports=n},function(t,e){function n(t){return this.__data__.get(t)}t.exports=n},function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},function(t,e,n){function r(t,e){var n=this.__data__;if(n instanceof o){var r=n.__data__;if(!i||r.length<c-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(r)}return n.set(t,e),this.size=n.size,this}var o=n(4),i=n(10),a=n(61),c=200;t.exports=r},function(t,e,n){function r(t){return!(!a(t)||i(t))&&(o(t)?h:s).test(c(t))}var o=n(22),i=n(58),a=n(2),c=n(24),u=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,f=Function.prototype,p=Object.prototype,l=f.toString,v=p.hasOwnProperty,h=RegExp("^"+l.call(v).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){function r(t){var e=a.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var o=c.call(t);return r&&(e?t[u]=n:delete t[u]),o}var o=n(11),i=Object.prototype,a=i.hasOwnProperty,c=i.toString,u=o?o.toStringTag:void 0;t.exports=r},function(t,e){function n(t){return o.call(t)}var r=Object.prototype,o=r.toString;t.exports=n},function(t,e,n){function r(t){return!!i&&i in t}var o=n(59),i=function(){var t=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=r},function(t,e,n){var r=n(0),o=r["__core-js_shared__"];t.exports=o},function(t,e){function n(t,e){return null==t?void 0:t[e]}t.exports=n},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var o=n(62),i=n(69),a=n(71),c=n(72),u=n(73);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=c,r.prototype.set=u,t.exports=r},function(t,e,n){function r(){this.size=0,this.__data__={hash:new o,map:new(a||i),string:new o}}var o=n(63),i=n(4),a=n(10);t.exports=r},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var o=n(64),i=n(65),a=n(66),c=n(67),u=n(68);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=c,r.prototype.set=u,t.exports=r},function(t,e,n){function r(){this.__data__=o?o(null):{},this.size=0}var o=n(7);t.exports=r},function(t,e){function n(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=n},function(t,e,n){function r(t){var e=this.__data__;if(o){var n=e[t];return n===i?void 0:n}return c.call(e,t)?e[t]:void 0}var o=n(7),i="__lodash_hash_undefined__",a=Object.prototype,c=a.hasOwnProperty;t.exports=r},function(t,e,n){function r(t){var e=this.__data__;return o?void 0!==e[t]:a.call(e,t)}var o=n(7),i=Object.prototype,a=i.hasOwnProperty;t.exports=r},function(t,e,n){function r(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=o&&void 0===e?i:e,this}var o=n(7),i="__lodash_hash_undefined__";t.exports=r},function(t,e,n){function r(t){var e=o(this,t).delete(t);return this.size-=e?1:0,e}var o=n(8);t.exports=r},function(t,e){function n(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}t.exports=n},function(t,e,n){function r(t){return o(this,t).get(t)}var o=n(8);t.exports=r},function(t,e,n){function r(t){return o(this,t).has(t)}var o=n(8);t.exports=r},function(t,e,n){function r(t,e){var n=o(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var o=n(8);t.exports=r},function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}t.exports=n},function(t,e,n){var r=n(1),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,n){function r(t,e){return t&&o(e,i(e),t)}var o=n(9),i=n(12);t.exports=r},function(t,e){function n(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}t.exports=n},function(t,e,n){var r=n(79),o=n(3),i=Object.prototype,a=i.hasOwnProperty,c=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return o(t)&&a.call(t,"callee")&&!c.call(t,"callee")};t.exports=u},function(t,e,n){function r(t){return i(t)&&o(t)==a}var o=n(6),i=n(3),a="[object Arguments]";t.exports=r},function(t,e){function n(){return!1}t.exports=n},function(t,e){function n(t,e){var n=typeof t;return!!(e=null==e?r:e)&&("number"==n||"symbol"!=n&&o.test(t))&&t>-1&&t%1==0&&t<e}var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;t.exports=n},function(t,e,n){var r=n(83),o=n(15),i=n(16),a=i&&i.isTypedArray,c=a?o(a):r;t.exports=c},function(t,e,n){function r(t){return a(t)&&i(t.length)&&!!c[o(t)]}var o=n(6),i=n(29),a=n(3),c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c["[object Arguments]"]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c["[object Map]"]=c["[object Number]"]=c["[object Object]"]=c["[object RegExp]"]=c["[object Set]"]=c["[object String]"]=c["[object WeakMap]"]=!1,t.exports=r},function(t,e,n){function r(t){if(!o(t))return i(t);var e=[];for(var n in Object(t))c.call(t,n)&&"constructor"!=n&&e.push(n);return e}var o=n(17),i=n(85),a=Object.prototype,c=a.hasOwnProperty;t.exports=r},function(t,e,n){var r=n(30),o=r(Object.keys,Object);t.exports=o},function(t,e,n){function r(t,e){return t&&o(e,i(e),t)}var o=n(9),i=n(32);t.exports=r},function(t,e,n){function r(t){if(!o(t))return a(t);var e=i(t),n=[];for(var r in t)("constructor"!=r||!e&&u.call(t,r))&&n.push(r);return n}var o=n(2),i=n(17),a=n(88),c=Object.prototype,u=c.hasOwnProperty;t.exports=r},function(t,e){function n(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}t.exports=n},function(t,e,n){(function(t){function r(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}var o=n(0),i="object"==typeof e&&e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,c=a&&a.exports===i,u=c?o.Buffer:void 0,s=u?u.allocUnsafe:void 0;t.exports=r}).call(e,n(14)(t))},function(t,e){function n(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}t.exports=n},function(t,e,n){function r(t,e){return o(t,i(t),e)}var o=n(9),i=n(18);t.exports=r},function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}t.exports=n},function(t,e,n){function r(t,e){return o(t,i(t),e)}var o=n(9),i=n(34);t.exports=r},function(t,e,n){function r(t){return o(t,a,i)}var o=n(37),i=n(18),a=n(12);t.exports=r},function(t,e,n){function r(t){return o(t,a,i)}var o=n(37),i=n(34),a=n(32);t.exports=r},function(t,e,n){var r=n(1),o=n(0),i=r(o,"DataView");t.exports=i},function(t,e,n){var r=n(1),o=n(0),i=r(o,"Promise");t.exports=i},function(t,e,n){var r=n(1),o=n(0),i=r(o,"Set");t.exports=i},function(t,e,n){var r=n(1),o=n(0),i=r(o,"WeakMap");t.exports=i},function(t,e){function n(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&o.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var r=Object.prototype,o=r.hasOwnProperty;t.exports=n},function(t,e,n){function r(t,e,n){var r=t.constructor;switch(e){case d:return o(t);case s:case f:return new r(+t);case j:return i(t,n);case x:case _:case g:case S:case m:case w:case O:case A:case I:return u(t,n);case p:return new r;case l:case y:return new r(t);case v:return a(t);case h:return new r;case b:return c(t)}}var o=n(20),i=n(103),a=n(104),c=n(105),u=n(106),s="[object Boolean]",f="[object Date]",p="[object Map]",l="[object Number]",v="[object RegExp]",h="[object Set]",y="[object String]",b="[object Symbol]",d="[object ArrayBuffer]",j="[object DataView]",x="[object Float32Array]",_="[object Float64Array]",g="[object Int8Array]",S="[object Int16Array]",m="[object Int32Array]",w="[object Uint8Array]",O="[object Uint8ClampedArray]",A="[object Uint16Array]",I="[object Uint32Array]";t.exports=r},function(t,e,n){var r=n(0),o=r.Uint8Array;t.exports=o},function(t,e,n){function r(t,e){var n=e?o(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var o=n(20);t.exports=r},function(t,e){function n(t){var e=new t.constructor(t.source,r.exec(t));return e.lastIndex=t.lastIndex,e}var r=/\w*$/;t.exports=n},function(t,e,n){function r(t){return a?Object(a.call(t)):{}}var o=n(11),i=o?o.prototype:void 0,a=i?i.valueOf:void 0;t.exports=r},function(t,e,n){function r(t,e){var n=e?o(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var o=n(20);t.exports=r},function(t,e,n){function r(t){return"function"!=typeof t.constructor||a(t)?{}:o(i(t))}var o=n(108),i=n(36),a=n(17);t.exports=r},function(t,e,n){var r=n(2),o=Object.create,i=function(){function t(){}return function(e){if(!r(e))return{};if(o)return o(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=i},function(t,e,n){var r=n(110),o=n(15),i=n(16),a=i&&i.isMap,c=a?o(a):r;t.exports=c},function(t,e,n){function r(t){return i(t)&&o(t)==a}var o=n(19),i=n(3),a="[object Map]";t.exports=r},function(t,e,n){var r=n(112),o=n(15),i=n(16),a=i&&i.isSet,c=a?o(a):r;t.exports=c},function(t,e,n){function r(t){return i(t)&&o(t)==a}var o=n(19),i=n(3),a="[object Set]";t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){var n=15*Math.cos(e.rotation*Math.PI/180),r=15*Math.sin(e.rotation*Math.PI/180);t.lineWidth=2,t.beginPath(),t.moveTo(300*e.position.x-n,300*e.position.y-r),t.lineTo(300*e.position.x,300*e.position.y),t.strokeStyle="#f99",t.stroke(),t.beginPath(),t.moveTo(300*e.position.x,300*e.position.y),t.lineTo(300*e.position.x+n,300*e.position.y+r),t.strokeStyle="#99f",t.stroke()};e.createCanvas=function(){var t=document.createElement("canvas");return t.width=300,t.height=300,document.getElementById("views").appendChild(t),t.getContext("2d")},e.renderGameState=function(t,e,n){t.clearRect(0,0,300,300);for(var o in e.players)r(t,e.players[o]);t.font="12px monospace",t.fillStyle="#fff",t.fillText(n,2,12)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(38);!function(t){t[t.Nothing=0]="Nothing",t[t.WASD=1]="WASD",t[t.Arrows=2]="Arrows"}(r=e.PlayerInputScheme||(e.PlayerInputScheme={}));var i={};document.onkeydown=function(t){return i[t.keyCode]=!0},document.onkeyup=function(t){return delete i[t.keyCode]};var a=function(){return{up:!0===i[87],down:!1,left:!0===i[65],right:!0===i[68],shoot:!1,uid:o.generateUID()}},c=function(){return{up:!0===i[38],down:!1,left:!0===i[37],right:!0===i[39],shoot:!1,uid:o.generateUID()}},u=function(){return{up:!1,down:!1,left:!1,right:!1,shoot:!1,uid:o.generateUID()}};e.getLatestInputs=function(t){switch(t){case r.WASD:return a();case r.Arrows:return c()}return u()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(40),o=n(113),i=n(114),a=function(){function t(t){this.inputMap={},this.clientCallbacks=[],this.canvasContext=t,this.gameState=r.newGameState()}return t.prototype.addClient=function(t,e){this.gameState.players[t]=r.newPlayerState(),this.clientCallbacks.push(e),this.inputMap[t]=i.getLatestInputs(i.PlayerInputScheme.Nothing)},t.prototype.receiveInput=function(t,e){this.inputMap[t]=e},t.prototype.update=function(){var t=this;this.gameState=r.stepGameState(this.inputMap,this.gameState),this.clientCallbacks.forEach(function(e){return e(t.gameState)}),o.renderGameState(this.canvasContext,this.gameState,"Server")},t}();e.Server=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(40),o=n(113),i=n(114),a=n(38),c=0,u=function(){function t(t){this.inputStack=[],this.gameState=null,this.serverCallback=null,this.canvasContext=t,this.inputScheme=c++%2==0?i.PlayerInputScheme.Arrows:i.PlayerInputScheme.WASD,this._playerUID=a.generateUID()}return Object.defineProperty(t.prototype,"playerUID",{get:function(){return this._playerUID},enumerable:!0,configurable:!0}),t.prototype.bindServer=function(t){this.serverCallback=t},t.prototype.receiveState=function(t){if(null==this.gameState)return void(this.gameState=t);for(var e=this.inputStack.length;--e>=0&&t.players[this._playerUID].lastInputUID!==this.inputStack[e].uid;);if(e>=0){this.gameState=t;for(var n=e+1;n<this.inputStack.length;++n)this.gameState=r.predictGameState(this.inputStack[n],this._playerUID,this.gameState)}},t.prototype.update=function(){if(null!==this.gameState){var t=i.getLatestInputs(this.inputScheme);this.gameState=r.predictGameState(t,this._playerUID,this.gameState),this.inputStack.push(t),this.inputStack.length>100&&this.inputStack.splice(0,1),null!==this.serverCallback&&this.serverCallback(this._playerUID,t);var e="Client "+(this.inputScheme===i.PlayerInputScheme.WASD?"(WASD)":"(Arrows)");o.renderGameState(this.canvasContext,this.gameState,e)}},t}();e.Client=u}]);
//# sourceMappingURL=bundle.js.map