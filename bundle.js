!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=42)}([function(t,e,n){var r=n(26),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},function(t,e,n){function r(t,e){var n=i(t,e);return o(n)?n:void 0}var o=n(56),i=n(62);t.exports=r},function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var o=n(46),i=n(47),a=n(48),c=n(49),u=n(50);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=c,r.prototype.set=u,t.exports=r},function(t,e,n){function r(t,e){for(var n=t.length;n--;)if(o(t[n][0],e))return n;return-1}var o=n(24);t.exports=r},function(t,e,n){function r(t){return null==t?void 0===t?u:c:s&&s in Object(t)?i(t):a(t)}var o=n(13),i=n(58),a=n(59),c="[object Null]",u="[object Undefined]",s=o?o.toStringTag:void 0;t.exports=r},function(t,e,n){var r=n(1),o=r(Object,"create");t.exports=o},function(t,e,n){function r(t,e){var n=t.__data__;return o(e)?n["string"==typeof e?"string":"hash"]:n.map}var o=n(72);t.exports=r},function(t,e,n){function r(t,e,n,r){var a=!n;n||(n={});for(var c=-1,u=e.length;++c<u;){var s=e[c],f=r?r(n[s],t[s],s,n,t):void 0;void 0===f&&(f=t[s]),a?i(n,s,f):o(n,s,f)}return n}var o=n(28),i=n(29);t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),o=n(23);e.LASER_TOTAL_TIME=10,e.PLAYER_RADIUS=.05;var i;!function(t){t[t.Nothing=0]="Nothing",t[t.Predicted=1]="Predicted",t[t.Confirmed=2]="Confirmed"}(i=e.HitStatus||(e.HitStatus={})),e.newGameState=function(){return{frameCount:0,predictedFrameCount:0,players:{},lasers:[]}},e.newPlayerState=function(){return{lastInputUID:"",position:{x:.25+.5*Math.random(),y:.25+.5*Math.random()},rotation:2*Math.PI*Math.random(),laserCooldown:0,hitStatus:i.Nothing,hitCooldown:0}};var a=function(t,n,a){var c=o(a),u={newState:c,newLaser:null};c.hitCooldown>0&&--c.hitCooldown<=0&&(c.hitStatus=i.Nothing),t.left&&(c.rotation-=.2),t.right&&(c.rotation+=.2);var s=r.v2fromRadial(1,c.rotation);return t.up&&(c.position=r.v2add(c.position,r.v2scale(s,.02))),c.position.x>1-e.PLAYER_RADIUS&&(c.position.x=1-e.PLAYER_RADIUS),c.position.y>1-e.PLAYER_RADIUS&&(c.position.y=1-e.PLAYER_RADIUS),c.position.x<e.PLAYER_RADIUS&&(c.position.x=e.PLAYER_RADIUS),c.position.y<e.PLAYER_RADIUS&&(c.position.y=e.PLAYER_RADIUS),c.laserCooldown>0&&c.laserCooldown--,t.shoot&&c.laserCooldown<1&&(u.newLaser={ownerUID:n,source:r.v2add(c.position,r.v2scale(s,e.PLAYER_RADIUS)),angle:c.rotation,timeLeft:e.LASER_TOTAL_TIME},c.laserCooldown=20),c.lastInputUID=t.uid,u},c=function(t,n){return r.circleLineIntersect(t.source,r.v2add(t.source,r.v2fromRadial(1e3,t.angle)),n,e.PLAYER_RADIUS)},u=function(t,e,n,r,o){for(var i=o.length-1;i>=0;--i)if(o[i].frameCount===r)return c(t,o[i].players[n].position);return!1},s=function(t){for(var e=t.lasers.length-1;e>=0;--e)--t.lasers[e].timeLeft<=0&&t.lasers.splice(e,1)},f=function(t,e,n){var r=a(e,n,t.players[n]);t.players[n]=r.newState,null!==r.newLaser&&t.lasers.push(r.newLaser)};e.stepGameState=function(t,n){var r=n[n.length-1],a=o(r);a.frameCount++,a.predictedFrameCount=a.frameCount,s(a);for(var c in a.players)f(a,t[c],c);for(var p=0,l=a.lasers;p<l.length;p++){var v=l[p];for(var h in a.players)if(v.ownerUID!==h){var y=t[v.ownerUID].frame;v.timeLeft===e.LASER_TOTAL_TIME&&u(v,v.ownerUID,h,y,n)&&(a.players[h].hitStatus=i.Confirmed,a.players[h].hitCooldown=20)}}return a},e.predictGameState=function(t,n,r,a){var u=o(r);if(u.predictedFrameCount++,s(u),f(u,t,n),a){for(var p in u.players)!function(t){if(n===t)return"continue";u.lasers.forEach(function(r){r.ownerUID===n&&r.timeLeft===e.LASER_TOTAL_TIME&&c(r,u.players[t].position)&&(u.players[t].hitStatus=i.Predicted)})}(p)}return u}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateUID=function(){return Math.random().toString(36).substr(2)},e.v2add=function(t,e){return{x:t.x+e.x,y:t.y+e.y}},e.v2sub=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},e.v2scale=function(t,e){return{x:e*t.x,y:e*t.y}},e.v2rotate=function(t,e){var n=Math.cos(e),r=Math.sin(e);return{x:t.x*n-t.y*r,y:t.x*r+t.y*n}},e.v2sqrMagnitude=function(t){return t.x*t.x+t.y*t.y},e.v2fromRadial=function(t,e){return{x:t*Math.cos(e),y:t*Math.sin(e)}},e.circleLineIntersect=function(t,n,r,o){var i=e.v2sub(r,t);if(e.v2sqrMagnitude(i)<o*o)return!0;if(e.v2sqrMagnitude(e.v2sub(r,n))<o*o)return!0;var a=Math.atan2(n.y-t.y,n.x-t.x),c=e.v2rotate(i,-a);if(Math.abs(c.y)>o)return!1;var u=c.x*c.x;return!(u<0)&&!(u>e.v2sqrMagnitude(e.v2sub(n,t)))}},function(t,e,n){var r=n(1),o=n(0),i=r(o,"Map");t.exports=i},function(t,e,n){var r=n(0),o=r.Symbol;t.exports=o},function(t,e,n){function r(t){return a(t)?o(t):i(t)}var o=n(30),i=n(86),a=n(34);t.exports=r},function(t,e){var n=Array.isArray;t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){function n(t){return function(e){return t(e)}}t.exports=n},function(t,e,n){(function(t){var r=n(26),o="object"==typeof e&&e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o,c=a&&r.process,u=function(){try{return c&&c.binding&&c.binding("util")}catch(t){}}();t.exports=u}).call(e,n(16)(t))},function(t,e){function n(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}var r=Object.prototype;t.exports=n},function(t,e,n){var r=n(94),o=n(36),i=Object.prototype,a=i.propertyIsEnumerable,c=Object.getOwnPropertySymbols,u=c?function(t){return null==t?[]:(t=Object(t),r(c(t),function(e){return a.call(t,e)}))}:o;t.exports=u},function(t,e,n){var r=n(98),o=n(12),i=n(99),a=n(100),c=n(101),u=n(6),s=n(27),f=s(r),p=s(o),l=s(i),v=s(a),h=s(c),y=u;(r&&"[object DataView]"!=y(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=y(new o)||i&&"[object Promise]"!=y(i.resolve())||a&&"[object Set]"!=y(new a)||c&&"[object WeakMap]"!=y(new c))&&(y=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?s(n):"";if(r)switch(r){case f:return"[object DataView]";case p:return"[object Map]";case l:return"[object Promise]";case v:return"[object Set]";case h:return"[object WeakMap]"}return e}),t.exports=y},function(t,e,n){function r(t){var e=new t.constructor(t.byteLength);return new o(e).set(new o(t)),e}var o=n(104);t.exports=r},function(t,e,n){function r(t){return o(t,i|a)}var o=n(44),i=1,a=4;t.exports=r},function(t,e){function n(t,e){return t===e||t!==t&&e!==e}t.exports=n},function(t,e,n){function r(t){if(!i(t))return!1;var e=o(t);return e==c||e==u||e==a||e==s}var o=n(6),i=n(2),a="[object AsyncFunction]",c="[object Function]",u="[object GeneratorFunction]",s="[object Proxy]";t.exports=r},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(e,n(57))},function(t,e){function n(t){if(null!=t){try{return o.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var r=Function.prototype,o=r.toString;t.exports=n},function(t,e,n){function r(t,e,n){var r=t[e];c.call(t,e)&&i(r,n)&&(void 0!==n||e in t)||o(t,e,n)}var o=n(29),i=n(24),a=Object.prototype,c=a.hasOwnProperty;t.exports=r},function(t,e,n){function r(t,e,n){"__proto__"==e&&o?o(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var o=n(77);t.exports=r},function(t,e,n){function r(t,e){var n=a(t),r=!n&&i(t),f=!n&&!r&&c(t),l=!n&&!r&&!f&&s(t),v=n||r||f||l,h=v?o(t.length,String):[],y=h.length;for(var d in t)!e&&!p.call(t,d)||v&&("length"==d||f&&("offset"==d||"parent"==d)||l&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||u(d,y))||h.push(d);return h}var o=n(79),i=n(80),a=n(15),c=n(31),u=n(83),s=n(84),f=Object.prototype,p=f.hasOwnProperty;t.exports=r},function(t,e,n){(function(t){var r=n(0),o=n(82),i="object"==typeof e&&e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,c=a&&a.exports===i,u=c?r.Buffer:void 0,s=u?u.isBuffer:void 0,f=s||o;t.exports=f}).call(e,n(16)(t))},function(t,e){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}var r=9007199254740991;t.exports=n},function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},function(t,e,n){function r(t){return null!=t&&i(t.length)&&!o(t)}var o=n(25),i=n(32);t.exports=r},function(t,e,n){function r(t){return a(t)?o(t,!0):i(t)}var o=n(30),i=n(89),a=n(34);t.exports=r},function(t,e){function n(){return[]}t.exports=n},function(t,e,n){var r=n(38),o=n(39),i=n(20),a=n(36),c=Object.getOwnPropertySymbols,u=c?function(t){for(var e=[];t;)r(e,i(t)),t=o(t);return e}:a;t.exports=u},function(t,e){function n(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}t.exports=n},function(t,e,n){var r=n(33),o=r(Object.getPrototypeOf,Object);t.exports=o},function(t,e,n){function r(t,e,n){var r=e(t);return i(t)?r:o(r,n(t))}var o=n(38),i=n(15);t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(11);!function(t){t[t.Nothing=0]="Nothing",t[t.WASD=1]="WASD",t[t.Arrows=2]="Arrows"}(r=e.PlayerInputScheme||(e.PlayerInputScheme={}));var i={};document.onkeydown=function(t){return i[t.keyCode]=!0},document.onkeyup=function(t){return delete i[t.keyCode]};var a=function(t){return{up:!0===i[87],left:!0===i[65],right:!0===i[68],shoot:!0===i[83],uid:o.generateUID(),frame:t}},c=function(t){return{up:!0===i[38],left:!0===i[37],right:!0===i[39],shoot:!0===i[40],uid:o.generateUID(),frame:t}},u=function(t){return{up:!1,left:!1,right:!1,shoot:!1,uid:o.generateUID(),frame:t}};e.getLatestInputs=function(t,e){switch(t){case r.WASD:return a(e);case r.Arrows:return c(e)}return u(e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(43),o=n(115),i=n(116),a=n(23),c=document.getElementById("addClientButton"),u=document.getElementById("setLatency"),s=document.getElementById("setLatencyVariance"),f=parseFloat(u.value),p=parseFloat(s.value);u.onkeyup=function(t){return f=parseFloat(t.target.value)},s.onkeyup=function(t){return p=parseFloat(t.target.value)};var l=[],v=new r.Server(i.createRenderer());l.push(setInterval(v.update.bind(v),50));var h=function(t){Math.random()<0||setTimeout(t,f+p*Math.random())};c.onclick=function(t){var e=new o.Client(i.createRenderer());v.addClient(e.playerUID,function(t){return h(function(){return e.receiveState(a(t))})}),e.bindServer(function(t,e){return h(function(){return v.receiveInput(t,a(e))})}),l.push(setInterval(e.update.bind(e),50))},document.getElementById("inspectButton").onclick=function(t){l.forEach(function(t){return clearInterval(t)}),c.onclick=function(t){},document.getElementById("inspectBackButton").onclick=function(t){i.renderHistoryBack()},document.getElementById("inspectForwardButton").onclick=function(t){i.renderHistoryForward()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),o=n(41),i=function(t){var e={};for(var n in t)e[n]=t[n].length>1?t[n].splice(0,1)[0]:t[n][0];return e},a=function(){function t(t){this.inputBuffers={},this.clientCallbacks=[],this.stateHistory=[],this.renderer=t,this.stateHistory.push(r.newGameState())}return Object.defineProperty(t.prototype,"curState",{get:function(){return this.stateHistory[this.stateHistory.length-1]},enumerable:!0,configurable:!0}),t.prototype.addClient=function(t,e){this.curState.players[t]=r.newPlayerState(),this.clientCallbacks.push(e),this.inputBuffers[t]=[o.getLatestInputs(o.PlayerInputScheme.Nothing,this.curState.frameCount)]},t.prototype.receiveInput=function(t,e){this.inputBuffers[t].push(e)},t.prototype.update=function(){var t=r.stepGameState(i(this.inputBuffers),this.stateHistory);this.stateHistory.push(t),this.stateHistory.length>100&&this.stateHistory.splice(0,1),this.clientCallbacks.forEach(function(e){return e(t)}),this.renderer(t)},t}();e.Server=a},function(t,e,n){function r(t,e,n,C,E,L){var R,T=e&A,B=e&I,F=e&O;if(n&&(R=E?n(t,C,E,L):n(t)),void 0!==R)return R;if(!m(t))return t;var z=_(t);if(z){if(R=d(t),!T)return f(t,R)}else{var H=y(t),Y=H==M||H==U;if(j(t))return s(t,T);if(H==D||H==P||Y&&!E){if(R=B||Y?{}:x(t),!T)return B?l(t,u(R,t)):p(t,c(R,t))}else{if(!k[H])return E?t:{};R=b(t,H,T)}}L||(L=new o);var N=L.get(t);if(N)return N;if(L.set(t,R),S(t))return t.forEach(function(o){R.add(r(o,e,n,o,t,L))}),R;if(g(t))return t.forEach(function(o,i){R.set(i,r(o,e,n,i,t,L))}),R;var W=F?B?h:v:B?keysIn:w,G=z?void 0:W(t);return i(G||t,function(o,i){G&&(i=o,o=t[i]),a(R,i,r(o,e,n,i,t,L))}),R}var o=n(45),i=n(76),a=n(28),c=n(78),u=n(88),s=n(91),f=n(92),p=n(93),l=n(95),v=n(96),h=n(97),y=n(21),d=n(102),b=n(103),x=n(109),_=n(15),j=n(31),g=n(111),m=n(2),S=n(113),w=n(14),A=1,I=2,O=4,P="[object Arguments]",M="[object Function]",U="[object GeneratorFunction]",D="[object Object]",k={};k[P]=k["[object Array]"]=k["[object ArrayBuffer]"]=k["[object DataView]"]=k["[object Boolean]"]=k["[object Date]"]=k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Map]"]=k["[object Number]"]=k[D]=k["[object RegExp]"]=k["[object Set]"]=k["[object String]"]=k["[object Symbol]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k["[object Error]"]=k[M]=k["[object WeakMap]"]=!1,t.exports=r},function(t,e,n){function r(t){var e=this.__data__=new o(t);this.size=e.size}var o=n(4),i=n(51),a=n(52),c=n(53),u=n(54),s=n(55);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=c,r.prototype.has=u,r.prototype.set=s,t.exports=r},function(t,e){function n(){this.__data__=[],this.size=0}t.exports=n},function(t,e,n){function r(t){var e=this.__data__,n=o(e,t);return!(n<0)&&(n==e.length-1?e.pop():a.call(e,n,1),--this.size,!0)}var o=n(5),i=Array.prototype,a=i.splice;t.exports=r},function(t,e,n){function r(t){var e=this.__data__,n=o(e,t);return n<0?void 0:e[n][1]}var o=n(5);t.exports=r},function(t,e,n){function r(t){return o(this.__data__,t)>-1}var o=n(5);t.exports=r},function(t,e,n){function r(t,e){var n=this.__data__,r=o(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var o=n(5);t.exports=r},function(t,e,n){function r(){this.__data__=new o,this.size=0}var o=n(4);t.exports=r},function(t,e){function n(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}t.exports=n},function(t,e){function n(t){return this.__data__.get(t)}t.exports=n},function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},function(t,e,n){function r(t,e){var n=this.__data__;if(n instanceof o){var r=n.__data__;if(!i||r.length<c-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(r)}return n.set(t,e),this.size=n.size,this}var o=n(4),i=n(12),a=n(63),c=200;t.exports=r},function(t,e,n){function r(t){return!(!a(t)||i(t))&&(o(t)?h:s).test(c(t))}var o=n(25),i=n(60),a=n(2),c=n(27),u=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,f=Function.prototype,p=Object.prototype,l=f.toString,v=p.hasOwnProperty,h=RegExp("^"+l.call(v).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){function r(t){var e=a.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var o=c.call(t);return r&&(e?t[u]=n:delete t[u]),o}var o=n(13),i=Object.prototype,a=i.hasOwnProperty,c=i.toString,u=o?o.toStringTag:void 0;t.exports=r},function(t,e){function n(t){return o.call(t)}var r=Object.prototype,o=r.toString;t.exports=n},function(t,e,n){function r(t){return!!i&&i in t}var o=n(61),i=function(){var t=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=r},function(t,e,n){var r=n(0),o=r["__core-js_shared__"];t.exports=o},function(t,e){function n(t,e){return null==t?void 0:t[e]}t.exports=n},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var o=n(64),i=n(71),a=n(73),c=n(74),u=n(75);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=c,r.prototype.set=u,t.exports=r},function(t,e,n){function r(){this.size=0,this.__data__={hash:new o,map:new(a||i),string:new o}}var o=n(65),i=n(4),a=n(12);t.exports=r},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var o=n(66),i=n(67),a=n(68),c=n(69),u=n(70);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=c,r.prototype.set=u,t.exports=r},function(t,e,n){function r(){this.__data__=o?o(null):{},this.size=0}var o=n(7);t.exports=r},function(t,e){function n(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=n},function(t,e,n){function r(t){var e=this.__data__;if(o){var n=e[t];return n===i?void 0:n}return c.call(e,t)?e[t]:void 0}var o=n(7),i="__lodash_hash_undefined__",a=Object.prototype,c=a.hasOwnProperty;t.exports=r},function(t,e,n){function r(t){var e=this.__data__;return o?void 0!==e[t]:a.call(e,t)}var o=n(7),i=Object.prototype,a=i.hasOwnProperty;t.exports=r},function(t,e,n){function r(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=o&&void 0===e?i:e,this}var o=n(7),i="__lodash_hash_undefined__";t.exports=r},function(t,e,n){function r(t){var e=o(this,t).delete(t);return this.size-=e?1:0,e}var o=n(8);t.exports=r},function(t,e){function n(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}t.exports=n},function(t,e,n){function r(t){return o(this,t).get(t)}var o=n(8);t.exports=r},function(t,e,n){function r(t){return o(this,t).has(t)}var o=n(8);t.exports=r},function(t,e,n){function r(t,e){var n=o(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var o=n(8);t.exports=r},function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}t.exports=n},function(t,e,n){var r=n(1),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,n){function r(t,e){return t&&o(e,i(e),t)}var o=n(9),i=n(14);t.exports=r},function(t,e){function n(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}t.exports=n},function(t,e,n){var r=n(81),o=n(3),i=Object.prototype,a=i.hasOwnProperty,c=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return o(t)&&a.call(t,"callee")&&!c.call(t,"callee")};t.exports=u},function(t,e,n){function r(t){return i(t)&&o(t)==a}var o=n(6),i=n(3),a="[object Arguments]";t.exports=r},function(t,e){function n(){return!1}t.exports=n},function(t,e){function n(t,e){var n=typeof t;return!!(e=null==e?r:e)&&("number"==n||"symbol"!=n&&o.test(t))&&t>-1&&t%1==0&&t<e}var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;t.exports=n},function(t,e,n){var r=n(85),o=n(17),i=n(18),a=i&&i.isTypedArray,c=a?o(a):r;t.exports=c},function(t,e,n){function r(t){return a(t)&&i(t.length)&&!!c[o(t)]}var o=n(6),i=n(32),a=n(3),c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c["[object Arguments]"]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c["[object Map]"]=c["[object Number]"]=c["[object Object]"]=c["[object RegExp]"]=c["[object Set]"]=c["[object String]"]=c["[object WeakMap]"]=!1,t.exports=r},function(t,e,n){function r(t){if(!o(t))return i(t);var e=[];for(var n in Object(t))c.call(t,n)&&"constructor"!=n&&e.push(n);return e}var o=n(19),i=n(87),a=Object.prototype,c=a.hasOwnProperty;t.exports=r},function(t,e,n){var r=n(33),o=r(Object.keys,Object);t.exports=o},function(t,e,n){function r(t,e){return t&&o(e,i(e),t)}var o=n(9),i=n(35);t.exports=r},function(t,e,n){function r(t){if(!o(t))return a(t);var e=i(t),n=[];for(var r in t)("constructor"!=r||!e&&u.call(t,r))&&n.push(r);return n}var o=n(2),i=n(19),a=n(90),c=Object.prototype,u=c.hasOwnProperty;t.exports=r},function(t,e){function n(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}t.exports=n},function(t,e,n){(function(t){function r(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}var o=n(0),i="object"==typeof e&&e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,c=a&&a.exports===i,u=c?o.Buffer:void 0,s=u?u.allocUnsafe:void 0;t.exports=r}).call(e,n(16)(t))},function(t,e){function n(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}t.exports=n},function(t,e,n){function r(t,e){return o(t,i(t),e)}var o=n(9),i=n(20);t.exports=r},function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}t.exports=n},function(t,e,n){function r(t,e){return o(t,i(t),e)}var o=n(9),i=n(37);t.exports=r},function(t,e,n){function r(t){return o(t,a,i)}var o=n(40),i=n(20),a=n(14);t.exports=r},function(t,e,n){function r(t){return o(t,a,i)}var o=n(40),i=n(37),a=n(35);t.exports=r},function(t,e,n){var r=n(1),o=n(0),i=r(o,"DataView");t.exports=i},function(t,e,n){var r=n(1),o=n(0),i=r(o,"Promise");t.exports=i},function(t,e,n){var r=n(1),o=n(0),i=r(o,"Set");t.exports=i},function(t,e,n){var r=n(1),o=n(0),i=r(o,"WeakMap");t.exports=i},function(t,e){function n(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&o.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var r=Object.prototype,o=r.hasOwnProperty;t.exports=n},function(t,e,n){function r(t,e,n){var r=t.constructor;switch(e){case b:return o(t);case s:case f:return new r(+t);case x:return i(t,n);case _:case j:case g:case m:case S:case w:case A:case I:case O:return u(t,n);case p:return new r;case l:case y:return new r(t);case v:return a(t);case h:return new r;case d:return c(t)}}var o=n(22),i=n(105),a=n(106),c=n(107),u=n(108),s="[object Boolean]",f="[object Date]",p="[object Map]",l="[object Number]",v="[object RegExp]",h="[object Set]",y="[object String]",d="[object Symbol]",b="[object ArrayBuffer]",x="[object DataView]",_="[object Float32Array]",j="[object Float64Array]",g="[object Int8Array]",m="[object Int16Array]",S="[object Int32Array]",w="[object Uint8Array]",A="[object Uint8ClampedArray]",I="[object Uint16Array]",O="[object Uint32Array]";t.exports=r},function(t,e,n){var r=n(0),o=r.Uint8Array;t.exports=o},function(t,e,n){function r(t,e){var n=e?o(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var o=n(22);t.exports=r},function(t,e){function n(t){var e=new t.constructor(t.source,r.exec(t));return e.lastIndex=t.lastIndex,e}var r=/\w*$/;t.exports=n},function(t,e,n){function r(t){return a?Object(a.call(t)):{}}var o=n(13),i=o?o.prototype:void 0,a=i?i.valueOf:void 0;t.exports=r},function(t,e,n){function r(t,e){var n=e?o(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var o=n(22);t.exports=r},function(t,e,n){function r(t){return"function"!=typeof t.constructor||a(t)?{}:o(i(t))}var o=n(110),i=n(39),a=n(19);t.exports=r},function(t,e,n){var r=n(2),o=Object.create,i=function(){function t(){}return function(e){if(!r(e))return{};if(o)return o(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=i},function(t,e,n){var r=n(112),o=n(17),i=n(18),a=i&&i.isMap,c=a?o(a):r;t.exports=c},function(t,e,n){function r(t){return i(t)&&o(t)==a}var o=n(21),i=n(3),a="[object Map]";t.exports=r},function(t,e,n){var r=n(114),o=n(17),i=n(18),a=i&&i.isSet,c=a?o(a):r;t.exports=c},function(t,e,n){function r(t){return i(t)&&o(t)==a}var o=n(21),i=n(3),a="[object Set]";t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),o=n(41),i=n(11),a=0,c=function(){function t(t){this.inputStack=[],this.gameState=null,this.serverCallback=null,this.renderer=t,this.inputScheme=a++%2==0?o.PlayerInputScheme.Arrows:o.PlayerInputScheme.WASD,this._playerUID=i.generateUID()}return Object.defineProperty(t.prototype,"playerUID",{get:function(){return this._playerUID},enumerable:!0,configurable:!0}),t.prototype.bindServer=function(t){this.serverCallback=t},t.prototype.receiveState=function(t){if(null==this.gameState)return void(this.gameState=t);for(var e=this.inputStack.length;--e>=0&&t.players[this._playerUID].lastInputUID!==this.inputStack[e].uid;);if(e>=0){this.gameState=t;for(var n=e+1;n<this.inputStack.length;++n)this.gameState=r.predictGameState(this.inputStack[n],this._playerUID,this.gameState,!1)}},t.prototype.update=function(){if(null!==this.gameState){var t=o.getLatestInputs(this.inputScheme,this.gameState.frameCount);this.gameState=r.predictGameState(t,this._playerUID,this.gameState,!0),this.inputStack.push(t),this.inputStack.length>100&&this.inputStack.splice(0,1),null!==this.serverCallback&&this.serverCallback(this._playerUID,t),this.renderer(this.gameState)}},t}();e.Client=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),o=300*r.PLAYER_RADIUS,i=[],a=-1,c=function(t,e){var n=1e3*Math.cos(e.angle),o=1e3*Math.sin(e.angle);t.lineWidth=2,t.beginPath(),t.moveTo(300*e.source.x,300*e.source.y),t.lineTo(300*e.source.x+n,300*e.source.y+o);var i=Math.round(15*e.timeLeft/r.LASER_TOTAL_TIME).toString(16);t.strokeStyle="#0"+i+"0",t.stroke()},u=function(t,e){var n=o*Math.cos(e.rotation),i=o*Math.sin(e.rotation),a=o*Math.cos(e.rotation+150*Math.PI/180),c=o*Math.sin(e.rotation+150*Math.PI/180),u=o*Math.cos(e.rotation+210*Math.PI/180),s=o*Math.sin(e.rotation+210*Math.PI/180);t.lineWidth=2,t.strokeStyle=e.hitStatus===r.HitStatus.Predicted?"#fff":e.hitStatus===r.HitStatus.Confirmed?"#999":"#f99",t.beginPath(),t.moveTo(300*e.position.x+n,300*e.position.y+i),t.lineTo(300*e.position.x+a,300*e.position.y+c),t.moveTo(300*e.position.x+n,300*e.position.y+i),t.lineTo(300*e.position.x+u,300*e.position.y+s),t.stroke(),t.beginPath(),t.arc(300*e.position.x,300*e.position.y,o,0,2*Math.PI),t.stroke()},s=function(){var t=document.createElement("canvas");return t.width=300,t.height=300,document.getElementById("views").appendChild(t),t.getContext("2d")},f=function(t,e){t.clearRect(0,0,300,300);for(var n in e.players)u(t,e.players[n]);for(var r=0,o=e.lasers;r<o.length;r++){var i=o[r];c(t,i)}t.font="12px monospace",t.fillStyle="#fff",t.fillText(e.frameCount+" : "+e.predictedFrameCount,2,12)},p=0;e.createRenderer=function(){var t=s(),e=p++;return function(n){i.push({index:e,ctx:t,state:n}),a=i.length-1,i.length>1e3&&i.splice(0,1),f(t,n)}},e.renderHistoryBack=function(){--a<0&&(a=0);var t=i[a];f(t.ctx,t.state),console.log(t.index,t.state)},e.renderHistoryForward=function(){++a>=i.length&&(a=i.length-1);var t=i[a];f(t.ctx,t.state),console.log(t.index,t.state)}}]);
//# sourceMappingURL=bundle.js.map