!function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=42)}([function(t,e,r){var n=r(26),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();t.exports=i},function(t,e,r){function n(t,e){var r=i(t,e);return o(r)?r:void 0}var o=r(56),i=r(62);t.exports=n},function(t,e){function r(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=r},function(t,e){function r(t){return null!=t&&"object"==typeof t}t.exports=r},function(t,e,r){function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var o=r(46),i=r(47),a=r(48),u=r(49),c=r(50);n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=a,n.prototype.has=u,n.prototype.set=c,t.exports=n},function(t,e,r){function n(t,e){for(var r=t.length;r--;)if(o(t[r][0],e))return r;return-1}var o=r(24);t.exports=n},function(t,e,r){function n(t){return null==t?void 0===t?c:u:s&&s in Object(t)?i(t):a(t)}var o=r(13),i=r(58),a=r(59),u="[object Null]",c="[object Undefined]",s=o?o.toStringTag:void 0;t.exports=n},function(t,e,r){var n=r(1),o=n(Object,"create");t.exports=o},function(t,e,r){function n(t,e){var r=t.__data__;return o(e)?r["string"==typeof e?"string":"hash"]:r.map}var o=r(72);t.exports=n},function(t,e,r){function n(t,e,r,n){var a=!r;r||(r={});for(var u=-1,c=e.length;++u<c;){var s=e[u],f=n?n(r[s],t[s],s,r,t):void 0;void 0===f&&(f=t[s]),a?i(r,s,f):o(r,s,f)}return r}var o=r(28),i=r(29);t.exports=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(11),o=r(23);e.LASER_TOTAL_TIME=10,e.PLAYER_RADIUS=.05;var i;!function(t){t[t.Nothing=0]="Nothing",t[t.Predicted=1]="Predicted",t[t.Confirmed=2]="Confirmed"}(i=e.HitStatus||(e.HitStatus={})),e.newGameState=function(){return{frameCount:0,predictedFrameCount:0,players:{},lasers:[]}},e.newPlayerState=function(){return{lastInputUID:"",position:{x:.25+.5*Math.random(),y:.25+.5*Math.random()},rotation:2*Math.PI*Math.random(),laserCooldown:0,hitStatus:i.Nothing,hitCooldown:0}};var a=function(t,r,a){var u=o(a),c={newState:u,newLaser:null};u.hitCooldown>0&&--u.hitCooldown<=0&&(u.hitStatus=i.Nothing),t.left&&(u.rotation-=.2),t.right&&(u.rotation+=.2);var s=n.v2fromRadial(1,u.rotation);return t.up&&(u.position=n.v2add(u.position,n.v2scale(s,.02))),u.position.x>1-e.PLAYER_RADIUS&&(u.position.x=1-e.PLAYER_RADIUS),u.position.y>1-e.PLAYER_RADIUS&&(u.position.y=1-e.PLAYER_RADIUS),u.position.x<e.PLAYER_RADIUS&&(u.position.x=e.PLAYER_RADIUS),u.position.y<e.PLAYER_RADIUS&&(u.position.y=e.PLAYER_RADIUS),u.laserCooldown>0&&u.laserCooldown--,t.shoot&&u.laserCooldown<1&&(c.newLaser={ownerUID:r,source:n.v2add(u.position,n.v2scale(s,e.PLAYER_RADIUS)),angle:u.rotation,timeLeft:e.LASER_TOTAL_TIME},u.laserCooldown=20),u.lastInputUID=t.uid,c},u=function(t,r){return n.circleLineIntersect(t.source,n.v2add(t.source,n.v2fromRadial(1e3,t.angle)),r,e.PLAYER_RADIUS)},c=function(t,e,r,n,o){for(var i=o.length-1;i>=0;--i)if(o[i].frameCount===n)return u(t,o[i].players[r].position);return!1},s=function(t){for(var e=t.lasers.length-1;e>=0;--e)--t.lasers[e].timeLeft<=0&&t.lasers.splice(e,1)},f=function(t,e,r){var n=a(e,r,t.players[r]);t.players[r]=n.newState,null!==n.newLaser&&t.lasers.push(n.newLaser)};e.stepGameState=function(t,r){var n=r[r.length-1],a=o(n);a.frameCount++,a.predictedFrameCount=a.frameCount,s(a);for(var u in a.players)f(a,t[u],u);for(var p=0,l=a.lasers;p<l.length;p++){var v=l[p];for(var h in a.players)if(v.ownerUID!==h){var y=t[v.ownerUID].frame;v.timeLeft===e.LASER_TOTAL_TIME&&c(v,v.ownerUID,h,y,r)&&(a.players[h].hitStatus=i.Confirmed,a.players[h].hitCooldown=20)}}return a},e.predictGameState=function(t,r,n,a){var c=o(n);if(c.predictedFrameCount++,s(c),f(c,t,r),a){for(var p in c.players)!function(t){if(r===t)return"continue";c.lasers.forEach(function(n){n.ownerUID===r&&n.timeLeft===e.LASER_TOTAL_TIME&&u(n,c.players[t].position)&&(c.players[t].hitStatus=i.Predicted)})}(p)}return c}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateUID=function(){return Math.random().toString(36).substr(2)},e.v2add=function(t,e){return{x:t.x+e.x,y:t.y+e.y}},e.v2sub=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},e.v2scale=function(t,e){return{x:e*t.x,y:e*t.y}},e.v2rotate=function(t,e){var r=Math.cos(e),n=Math.sin(e);return{x:t.x*r-t.y*n,y:t.x*n+t.y*r}},e.v2sqrMagnitude=function(t){return t.x*t.x+t.y*t.y},e.v2fromRadial=function(t,e){return{x:t*Math.cos(e),y:t*Math.sin(e)}},e.circleLineIntersect=function(t,r,n,o){var i=e.v2sub(n,t);if(e.v2sqrMagnitude(i)<o*o)return!0;if(e.v2sqrMagnitude(e.v2sub(n,r))<o*o)return!0;var a=Math.atan2(r.y-t.y,r.x-t.x),u=e.v2rotate(i,-a);if(Math.abs(u.y)>o)return!1;var c=u.x*u.x;return!(c<0)&&!(c>e.v2sqrMagnitude(e.v2sub(r,t)))}},function(t,e,r){var n=r(1),o=r(0),i=n(o,"Map");t.exports=i},function(t,e,r){var n=r(0),o=n.Symbol;t.exports=o},function(t,e,r){function n(t){return a(t)?o(t):i(t)}var o=r(30),i=r(86),a=r(34);t.exports=n},function(t,e){var r=Array.isArray;t.exports=r},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){function r(t){return function(e){return t(e)}}t.exports=r},function(t,e,r){(function(t){var n=r(26),o="object"==typeof e&&e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o,u=a&&n.process,c=function(){try{return u&&u.binding&&u.binding("util")}catch(t){}}();t.exports=c}).call(e,r(16)(t))},function(t,e){function r(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}var n=Object.prototype;t.exports=r},function(t,e,r){var n=r(94),o=r(36),i=Object.prototype,a=i.propertyIsEnumerable,u=Object.getOwnPropertySymbols,c=u?function(t){return null==t?[]:(t=Object(t),n(u(t),function(e){return a.call(t,e)}))}:o;t.exports=c},function(t,e,r){var n=r(98),o=r(12),i=r(99),a=r(100),u=r(101),c=r(6),s=r(27),f=s(n),p=s(o),l=s(i),v=s(a),h=s(u),y=c;(n&&"[object DataView]"!=y(new n(new ArrayBuffer(1)))||o&&"[object Map]"!=y(new o)||i&&"[object Promise]"!=y(i.resolve())||a&&"[object Set]"!=y(new a)||u&&"[object WeakMap]"!=y(new u))&&(y=function(t){var e=c(t),r="[object Object]"==e?t.constructor:void 0,n=r?s(r):"";if(n)switch(n){case f:return"[object DataView]";case p:return"[object Map]";case l:return"[object Promise]";case v:return"[object Set]";case h:return"[object WeakMap]"}return e}),t.exports=y},function(t,e,r){function n(t){var e=new t.constructor(t.byteLength);return new o(e).set(new o(t)),e}var o=r(104);t.exports=n},function(t,e,r){function n(t){return o(t,i|a)}var o=r(44),i=1,a=4;t.exports=n},function(t,e){function r(t,e){return t===e||t!==t&&e!==e}t.exports=r},function(t,e,r){function n(t){if(!i(t))return!1;var e=o(t);return e==u||e==c||e==a||e==s}var o=r(6),i=r(2),a="[object AsyncFunction]",u="[object Function]",c="[object GeneratorFunction]",s="[object Proxy]";t.exports=n},function(t,e,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(e,r(57))},function(t,e){function r(t){if(null!=t){try{return o.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var n=Function.prototype,o=n.toString;t.exports=r},function(t,e,r){function n(t,e,r){var n=t[e];u.call(t,e)&&i(n,r)&&(void 0!==r||e in t)||o(t,e,r)}var o=r(29),i=r(24),a=Object.prototype,u=a.hasOwnProperty;t.exports=n},function(t,e,r){function n(t,e,r){"__proto__"==e&&o?o(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var o=r(77);t.exports=n},function(t,e,r){function n(t,e){var r=a(t),n=!r&&i(t),f=!r&&!n&&u(t),l=!r&&!n&&!f&&s(t),v=r||n||f||l,h=v?o(t.length,String):[],y=h.length;for(var d in t)!e&&!p.call(t,d)||v&&("length"==d||f&&("offset"==d||"parent"==d)||l&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||c(d,y))||h.push(d);return h}var o=r(79),i=r(80),a=r(15),u=r(31),c=r(83),s=r(84),f=Object.prototype,p=f.hasOwnProperty;t.exports=n},function(t,e,r){(function(t){var n=r(0),o=r(82),i="object"==typeof e&&e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,u=a&&a.exports===i,c=u?n.Buffer:void 0,s=c?c.isBuffer:void 0,f=s||o;t.exports=f}).call(e,r(16)(t))},function(t,e){function r(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}var n=9007199254740991;t.exports=r},function(t,e){function r(t,e){return function(r){return t(e(r))}}t.exports=r},function(t,e,r){function n(t){return null!=t&&i(t.length)&&!o(t)}var o=r(25),i=r(32);t.exports=n},function(t,e,r){function n(t){return a(t)?o(t,!0):i(t)}var o=r(30),i=r(89),a=r(34);t.exports=n},function(t,e){function r(){return[]}t.exports=r},function(t,e,r){var n=r(38),o=r(39),i=r(20),a=r(36),u=Object.getOwnPropertySymbols,c=u?function(t){for(var e=[];t;)n(e,i(t)),t=o(t);return e}:a;t.exports=c},function(t,e){function r(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}t.exports=r},function(t,e,r){var n=r(33),o=n(Object.getPrototypeOf,Object);t.exports=o},function(t,e,r){function n(t,e,r){var n=e(t);return i(t)?n:o(n,r(t))}var o=r(38),i=r(15);t.exports=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=r(11);!function(t){t[t.Nothing=0]="Nothing",t[t.WASD=1]="WASD",t[t.Arrows=2]="Arrows"}(n=e.PlayerInputScheme||(e.PlayerInputScheme={}));var i={};document.onkeydown=function(t){return i[t.keyCode]=!0},document.onkeyup=function(t){return delete i[t.keyCode]};var a=function(t){return{up:!0===i[87],left:!0===i[65],right:!0===i[68],shoot:!0===i[83],uid:o.generateUID(),frame:t}},u=function(t){return{up:!0===i[38],left:!0===i[37],right:!0===i[39],shoot:!0===i[40],uid:o.generateUID(),frame:t}},c=function(t){return{up:!1,left:!1,right:!1,shoot:!1,uid:o.generateUID(),frame:t}};e.getLatestInputs=function(t,e){switch(t){case n.WASD:return a(e);case n.Arrows:return u(e)}return c(e)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(43),o=r(115),i=r(116),a=r(23),u=document.getElementById("addClientButton"),c=document.getElementById("setLatency"),s=document.getElementById("setLatencyVariance"),f=parseFloat(c.value),p=parseFloat(s.value);c.onkeyup=function(t){return f=parseFloat(t.target.value)},s.onkeyup=function(t){return p=parseFloat(t.target.value)};var l=[],v=new n.Server(i.createRenderer());l.push(setInterval(v.update.bind(v),50));var h=function(t){Math.random()<0||setTimeout(t,f+p*Math.random())};u.onclick=function(t){var e=new o.Client(i.createRenderer());v.addClient(e.playerUID,function(t){return h(function(){return e.receiveState(a(t))})}),e.bindServer(function(t,e){return h(function(){return v.receiveInput(t,a(e))})}),l.push(setInterval(e.update.bind(e),50))};var y=!1;document.getElementById("inspectRange").oninput=function(t){y||(l.forEach(function(t){return clearInterval(t)}),u.onclick=function(t){},u.parentElement.removeChild(u),y=!0),i.setRenderHistoryFrame(parseInt(t.target.value))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(10),o=r(41),i=function(t){var e={};for(var r in t)e[r]=t[r].length>1?t[r].splice(0,1)[0]:t[r][0];return e},a=function(){function t(t){this.inputBuffers={},this.clientCallbacks=[],this.stateHistory=[],this.renderer=t,this.stateHistory.push(n.newGameState())}return Object.defineProperty(t.prototype,"curState",{get:function(){return this.stateHistory[this.stateHistory.length-1]},enumerable:!0,configurable:!0}),t.prototype.addClient=function(t,e){this.curState.players[t]=n.newPlayerState(),this.clientCallbacks.push(e),this.inputBuffers[t]=[o.getLatestInputs(o.PlayerInputScheme.Nothing,this.curState.frameCount)]},t.prototype.receiveInput=function(t,e){this.inputBuffers[t].push(e)},t.prototype.update=function(){var t=n.stepGameState(i(this.inputBuffers),this.stateHistory);this.stateHistory.push(t),this.stateHistory.length>100&&this.stateHistory.splice(0,1),this.clientCallbacks.forEach(function(e){return e(t)}),this.renderer(t)},t}();e.Server=a},function(t,e,r){function n(t,e,r,R,E,L){var k,T=e&A,F=e&I,z=e&O;if(r&&(k=E?r(t,R,E,L):r(t)),void 0!==k)return k;if(!m(t))return t;var B=_(t);if(B){if(k=d(t),!T)return f(t,k)}else{var H=y(t),Y=H==M||H==U;if(j(t))return s(t,T);if(H==D||H==P||Y&&!E){if(k=F||Y?{}:x(t),!T)return F?l(t,c(k,t)):p(t,u(k,t))}else{if(!C[H])return E?t:{};k=b(t,H,T)}}L||(L=new o);var N=L.get(t);if(N)return N;if(L.set(t,k),S(t))return t.forEach(function(o){k.add(n(o,e,r,o,t,L))}),k;if(g(t))return t.forEach(function(o,i){k.set(i,n(o,e,r,i,t,L))}),k;var W=z?F?h:v:F?keysIn:w,G=B?void 0:W(t);return i(G||t,function(o,i){G&&(i=o,o=t[i]),a(k,i,n(o,e,r,i,t,L))}),k}var o=r(45),i=r(76),a=r(28),u=r(78),c=r(88),s=r(91),f=r(92),p=r(93),l=r(95),v=r(96),h=r(97),y=r(21),d=r(102),b=r(103),x=r(109),_=r(15),j=r(31),g=r(111),m=r(2),S=r(113),w=r(14),A=1,I=2,O=4,P="[object Arguments]",M="[object Function]",U="[object GeneratorFunction]",D="[object Object]",C={};C[P]=C["[object Array]"]=C["[object ArrayBuffer]"]=C["[object DataView]"]=C["[object Boolean]"]=C["[object Date]"]=C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Map]"]=C["[object Number]"]=C[D]=C["[object RegExp]"]=C["[object Set]"]=C["[object String]"]=C["[object Symbol]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C["[object Error]"]=C[M]=C["[object WeakMap]"]=!1,t.exports=n},function(t,e,r){function n(t){var e=this.__data__=new o(t);this.size=e.size}var o=r(4),i=r(51),a=r(52),u=r(53),c=r(54),s=r(55);n.prototype.clear=i,n.prototype.delete=a,n.prototype.get=u,n.prototype.has=c,n.prototype.set=s,t.exports=n},function(t,e){function r(){this.__data__=[],this.size=0}t.exports=r},function(t,e,r){function n(t){var e=this.__data__,r=o(e,t);return!(r<0)&&(r==e.length-1?e.pop():a.call(e,r,1),--this.size,!0)}var o=r(5),i=Array.prototype,a=i.splice;t.exports=n},function(t,e,r){function n(t){var e=this.__data__,r=o(e,t);return r<0?void 0:e[r][1]}var o=r(5);t.exports=n},function(t,e,r){function n(t){return o(this.__data__,t)>-1}var o=r(5);t.exports=n},function(t,e,r){function n(t,e){var r=this.__data__,n=o(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var o=r(5);t.exports=n},function(t,e,r){function n(){this.__data__=new o,this.size=0}var o=r(4);t.exports=n},function(t,e){function r(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}t.exports=r},function(t,e){function r(t){return this.__data__.get(t)}t.exports=r},function(t,e){function r(t){return this.__data__.has(t)}t.exports=r},function(t,e,r){function n(t,e){var r=this.__data__;if(r instanceof o){var n=r.__data__;if(!i||n.length<u-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new a(n)}return r.set(t,e),this.size=r.size,this}var o=r(4),i=r(12),a=r(63),u=200;t.exports=n},function(t,e,r){function n(t){return!(!a(t)||i(t))&&(o(t)?h:s).test(u(t))}var o=r(25),i=r(60),a=r(2),u=r(27),c=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,f=Function.prototype,p=Object.prototype,l=f.toString,v=p.hasOwnProperty,h=RegExp("^"+l.call(v).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){function n(t){var e=a.call(t,c),r=t[c];try{t[c]=void 0;var n=!0}catch(t){}var o=u.call(t);return n&&(e?t[c]=r:delete t[c]),o}var o=r(13),i=Object.prototype,a=i.hasOwnProperty,u=i.toString,c=o?o.toStringTag:void 0;t.exports=n},function(t,e){function r(t){return o.call(t)}var n=Object.prototype,o=n.toString;t.exports=r},function(t,e,r){function n(t){return!!i&&i in t}var o=r(61),i=function(){var t=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=n},function(t,e,r){var n=r(0),o=n["__core-js_shared__"];t.exports=o},function(t,e){function r(t,e){return null==t?void 0:t[e]}t.exports=r},function(t,e,r){function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var o=r(64),i=r(71),a=r(73),u=r(74),c=r(75);n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=a,n.prototype.has=u,n.prototype.set=c,t.exports=n},function(t,e,r){function n(){this.size=0,this.__data__={hash:new o,map:new(a||i),string:new o}}var o=r(65),i=r(4),a=r(12);t.exports=n},function(t,e,r){function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var o=r(66),i=r(67),a=r(68),u=r(69),c=r(70);n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=a,n.prototype.has=u,n.prototype.set=c,t.exports=n},function(t,e,r){function n(){this.__data__=o?o(null):{},this.size=0}var o=r(7);t.exports=n},function(t,e){function r(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=r},function(t,e,r){function n(t){var e=this.__data__;if(o){var r=e[t];return r===i?void 0:r}return u.call(e,t)?e[t]:void 0}var o=r(7),i="__lodash_hash_undefined__",a=Object.prototype,u=a.hasOwnProperty;t.exports=n},function(t,e,r){function n(t){var e=this.__data__;return o?void 0!==e[t]:a.call(e,t)}var o=r(7),i=Object.prototype,a=i.hasOwnProperty;t.exports=n},function(t,e,r){function n(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=o&&void 0===e?i:e,this}var o=r(7),i="__lodash_hash_undefined__";t.exports=n},function(t,e,r){function n(t){var e=o(this,t).delete(t);return this.size-=e?1:0,e}var o=r(8);t.exports=n},function(t,e){function r(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}t.exports=r},function(t,e,r){function n(t){return o(this,t).get(t)}var o=r(8);t.exports=n},function(t,e,r){function n(t){return o(this,t).has(t)}var o=r(8);t.exports=n},function(t,e,r){function n(t,e){var r=o(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var o=r(8);t.exports=n},function(t,e){function r(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}t.exports=r},function(t,e,r){var n=r(1),o=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,r){function n(t,e){return t&&o(e,i(e),t)}var o=r(9),i=r(14);t.exports=n},function(t,e){function r(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}t.exports=r},function(t,e,r){var n=r(81),o=r(3),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(t){return o(t)&&a.call(t,"callee")&&!u.call(t,"callee")};t.exports=c},function(t,e,r){function n(t){return i(t)&&o(t)==a}var o=r(6),i=r(3),a="[object Arguments]";t.exports=n},function(t,e){function r(){return!1}t.exports=r},function(t,e){function r(t,e){var r=typeof t;return!!(e=null==e?n:e)&&("number"==r||"symbol"!=r&&o.test(t))&&t>-1&&t%1==0&&t<e}var n=9007199254740991,o=/^(?:0|[1-9]\d*)$/;t.exports=r},function(t,e,r){var n=r(85),o=r(17),i=r(18),a=i&&i.isTypedArray,u=a?o(a):n;t.exports=u},function(t,e,r){function n(t){return a(t)&&i(t.length)&&!!u[o(t)]}var o=r(6),i=r(32),a=r(3),u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u["[object Arguments]"]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u["[object Map]"]=u["[object Number]"]=u["[object Object]"]=u["[object RegExp]"]=u["[object Set]"]=u["[object String]"]=u["[object WeakMap]"]=!1,t.exports=n},function(t,e,r){function n(t){if(!o(t))return i(t);var e=[];for(var r in Object(t))u.call(t,r)&&"constructor"!=r&&e.push(r);return e}var o=r(19),i=r(87),a=Object.prototype,u=a.hasOwnProperty;t.exports=n},function(t,e,r){var n=r(33),o=n(Object.keys,Object);t.exports=o},function(t,e,r){function n(t,e){return t&&o(e,i(e),t)}var o=r(9),i=r(35);t.exports=n},function(t,e,r){function n(t){if(!o(t))return a(t);var e=i(t),r=[];for(var n in t)("constructor"!=n||!e&&c.call(t,n))&&r.push(n);return r}var o=r(2),i=r(19),a=r(90),u=Object.prototype,c=u.hasOwnProperty;t.exports=n},function(t,e){function r(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}t.exports=r},function(t,e,r){(function(t){function n(t,e){if(e)return t.slice();var r=t.length,n=s?s(r):new t.constructor(r);return t.copy(n),n}var o=r(0),i="object"==typeof e&&e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,u=a&&a.exports===i,c=u?o.Buffer:void 0,s=c?c.allocUnsafe:void 0;t.exports=n}).call(e,r(16)(t))},function(t,e){function r(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}t.exports=r},function(t,e,r){function n(t,e){return o(t,i(t),e)}var o=r(9),i=r(20);t.exports=n},function(t,e){function r(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}t.exports=r},function(t,e,r){function n(t,e){return o(t,i(t),e)}var o=r(9),i=r(37);t.exports=n},function(t,e,r){function n(t){return o(t,a,i)}var o=r(40),i=r(20),a=r(14);t.exports=n},function(t,e,r){function n(t){return o(t,a,i)}var o=r(40),i=r(37),a=r(35);t.exports=n},function(t,e,r){var n=r(1),o=r(0),i=n(o,"DataView");t.exports=i},function(t,e,r){var n=r(1),o=r(0),i=n(o,"Promise");t.exports=i},function(t,e,r){var n=r(1),o=r(0),i=n(o,"Set");t.exports=i},function(t,e,r){var n=r(1),o=r(0),i=n(o,"WeakMap");t.exports=i},function(t,e){function r(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&o.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var n=Object.prototype,o=n.hasOwnProperty;t.exports=r},function(t,e,r){function n(t,e,r){var n=t.constructor;switch(e){case b:return o(t);case s:case f:return new n(+t);case x:return i(t,r);case _:case j:case g:case m:case S:case w:case A:case I:case O:return c(t,r);case p:return new n;case l:case y:return new n(t);case v:return a(t);case h:return new n;case d:return u(t)}}var o=r(22),i=r(105),a=r(106),u=r(107),c=r(108),s="[object Boolean]",f="[object Date]",p="[object Map]",l="[object Number]",v="[object RegExp]",h="[object Set]",y="[object String]",d="[object Symbol]",b="[object ArrayBuffer]",x="[object DataView]",_="[object Float32Array]",j="[object Float64Array]",g="[object Int8Array]",m="[object Int16Array]",S="[object Int32Array]",w="[object Uint8Array]",A="[object Uint8ClampedArray]",I="[object Uint16Array]",O="[object Uint32Array]";t.exports=n},function(t,e,r){var n=r(0),o=n.Uint8Array;t.exports=o},function(t,e,r){function n(t,e){var r=e?o(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var o=r(22);t.exports=n},function(t,e){function r(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}var n=/\w*$/;t.exports=r},function(t,e,r){function n(t){return a?Object(a.call(t)):{}}var o=r(13),i=o?o.prototype:void 0,a=i?i.valueOf:void 0;t.exports=n},function(t,e,r){function n(t,e){var r=e?o(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var o=r(22);t.exports=n},function(t,e,r){function n(t){return"function"!=typeof t.constructor||a(t)?{}:o(i(t))}var o=r(110),i=r(39),a=r(19);t.exports=n},function(t,e,r){var n=r(2),o=Object.create,i=function(){function t(){}return function(e){if(!n(e))return{};if(o)return o(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();t.exports=i},function(t,e,r){var n=r(112),o=r(17),i=r(18),a=i&&i.isMap,u=a?o(a):n;t.exports=u},function(t,e,r){function n(t){return i(t)&&o(t)==a}var o=r(21),i=r(3),a="[object Map]";t.exports=n},function(t,e,r){var n=r(114),o=r(17),i=r(18),a=i&&i.isSet,u=a?o(a):n;t.exports=u},function(t,e,r){function n(t){return i(t)&&o(t)==a}var o=r(21),i=r(3),a="[object Set]";t.exports=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(10),o=r(41),i=r(11),a=0,u=function(){function t(t){this.inputStack=[],this.gameState=null,this.serverCallback=null,this.renderer=t,this.inputScheme=a++%2==0?o.PlayerInputScheme.Arrows:o.PlayerInputScheme.WASD,this._playerUID=i.generateUID()}return Object.defineProperty(t.prototype,"playerUID",{get:function(){return this._playerUID},enumerable:!0,configurable:!0}),t.prototype.bindServer=function(t){this.serverCallback=t},t.prototype.receiveState=function(t){if(null==this.gameState)return void(this.gameState=t);for(var e=this.inputStack.length;--e>=0&&t.players[this._playerUID].lastInputUID!==this.inputStack[e].uid;);if(e>=0){this.gameState=t;for(var r=e+1;r<this.inputStack.length;++r)this.gameState=n.predictGameState(this.inputStack[r],this._playerUID,this.gameState,!1)}},t.prototype.update=function(){if(null!==this.gameState){var t=o.getLatestInputs(this.inputScheme,this.gameState.frameCount);this.gameState=n.predictGameState(t,this._playerUID,this.gameState,!0),this.inputStack.push(t),this.inputStack.length>100&&this.inputStack.splice(0,1),null!==this.serverCallback&&this.serverCallback(this._playerUID,t),this.renderer(this.gameState)}},t}();e.Client=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(10),o=300*n.PLAYER_RADIUS,i=[],a=0,u=function(t,e){var r=1e3*Math.cos(e.angle),o=1e3*Math.sin(e.angle);t.lineWidth=2,t.beginPath(),t.moveTo(300*e.source.x,300*e.source.y),t.lineTo(300*e.source.x+r,300*e.source.y+o);var i=Math.round(15*e.timeLeft/n.LASER_TOTAL_TIME).toString(16);t.strokeStyle="#0"+i+"0",t.stroke()},c=function(t,e){var r=o*Math.cos(e.rotation),i=o*Math.sin(e.rotation),a=o*Math.cos(e.rotation+150*Math.PI/180),u=o*Math.sin(e.rotation+150*Math.PI/180),c=o*Math.cos(e.rotation+210*Math.PI/180),s=o*Math.sin(e.rotation+210*Math.PI/180);t.lineWidth=2,t.strokeStyle=e.hitStatus===n.HitStatus.Predicted?"#fff":e.hitStatus===n.HitStatus.Confirmed?"#999":"#f99",t.beginPath(),t.moveTo(300*e.position.x+r,300*e.position.y+i),t.lineTo(300*e.position.x+a,300*e.position.y+u),t.moveTo(300*e.position.x+r,300*e.position.y+i),t.lineTo(300*e.position.x+c,300*e.position.y+s),t.stroke(),t.beginPath(),t.arc(300*e.position.x,300*e.position.y,o,0,2*Math.PI),t.stroke()},s=function(){var t=document.createElement("canvas");return t.width=300,t.height=300,document.getElementById("views").appendChild(t),t.getContext("2d")},f=function(t,e){t.clearRect(0,0,300,300);for(var r in e.players)c(t,e.players[r]);for(var n=0,o=e.lasers;n<o.length;n++){var i=o[n];u(t,i)}t.font="12px monospace",t.fillStyle="#fff",t.fillText(e.frameCount+" : "+e.predictedFrameCount,2,12)};e.createRenderer=function(){var t=s(),e=a++;return function(r){i.push({index:e,ctx:t,state:r}),i.length>300&&i.splice(0,1),f(t,r)}},e.setRenderHistoryFrame=function(t){var e=i.length-1+t;e<0&&(e=0),e>=i.length&&(e=i.length-1);var r=i[e];f(r.ctx,r.state),console.log(r.index,r.state)}}]);
//# sourceMappingURL=bundle.js.map